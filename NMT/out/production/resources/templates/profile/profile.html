<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NONMENTOR</title>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
          integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
          crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
          crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
          integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
          crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
          integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
          crossorigin="anonymous"></script>


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link th:href="@{/css/header.css}" rel="stylesheet" />
  <style>
    .w-btn {
      position: relative;
      border: none;
      display: inline-block;
      padding: 15px 30px;
      border-radius: 15px;
      font-family: "paybooc-Light", sans-serif;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      text-decoration: none;
      font-weight: 600;
      transition: 0.25s;
    }

    .w-btn-outline {
      position: relative;
      padding: 15px 30px;
      border-radius: 15px;
      font-family: "paybooc-Light", sans-serif;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      text-decoration: none;
      font-weight: 600;
      transition: 0.25s;
    }

    .w-btn-indigo {
      background-color: aliceblue;
      color: #1e6b7b;
    }

    .w-btn-indigo-outline {
      border: 3px solid aliceblue;
      color: #1e6b7b;
    }

    .w-btn-indigo-outline:hover {
      color: #1e6b7b;
      background: aliceblue;
    }

    .btn-secondary {
      background-color: white;
      color: black;
      border: solid 1px #eaeaea;
      font-weight: 700;
    }


    #wrap {
      min-height: 35vh;
      position: relative;
      width: 100%;
    }

    footer {
      width: 100%;
      height: 110px;
      /* 내용물에 따라 알맞는 값 설정 */
      bottom: 0px;
      position: absolute;
    }

    .header-menu li {
      width: 20%;
      text-align: center;
      font-size: 18px;
      font-weight: 800;
    }


    .problem-li {
      display: flex;
      height: 45px;
      padding-bottom: 3px;
      margin-top: 20px;
      margin-left: 1%;
    }

    .problem-menu li {
      width: 13%;
      text-align: center;
      font-size: 15px;
      font-weight: 800;
    }

    .active-problem {
      border-bottom: solid #0d6efd 4px;
    }

    img {
      max-width: 100%;
      height: auto;
    }

    .user-summary-container {
      padding-left: 15%;
      padding-right: 15%;

    }

    button {
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
    }


    .user-info-li li {
      width: 10%;
      font-size: 15px;
      font-weight: 700;
    }

    .problem-block{
      background-color: #0d6efd;
      padding: 13px;
      text-align: center;
      display: inline-block;
      color: white;
      border-radius: 5px;
      margin: 5px;
    }
  </style>
</head>

<body>


<!--페이지 최상위 헤더-->
<div th:replace='template/header :: header'>
</div>


<div class="my-container" style="width: 100%;">
  <div style="width: 100%; ">
    <img
            src="https://static.solved.ac/profile_bg/balloon_002/balloon_002.png">
  </div>

  <div class="user-summary-container">
    <!-- 유저 기본 정보 (배경사진,프로필사진,레벨)-->
    <div style="width:100%; position: relative; height: 120px;">
      <div class="user-image" style="position: absolute; width: 120px;height: 120px;
                left: 0px; top: -50px; ">
        <img src="https://avatars.githubusercontent.com/u/71641610?v=4" alt="" style="position:absolute;border-radius: 50%; filter: drop-shadow(rgba(0, 212, 151, 0.6) 0px 4px 8px);
                    left: 0px;top: 0px;">
      </div>
      <div style="position: absolute; top:16px; right:16px;">
        <button class="w-btn w-btn-indigo" type="button">
          프로필 편집
        </button>
      </div>
    </div>
    <div>
      <h2 th:text="${user.nickName}">johan1103</h2>
      <div>자기소개</div>
    </div>

    <!-- 개요 컨테이너 -->
    <div id="summary-container">
      <!-- 푼 문제 리스트 -->
      <div style="width:100%; height: 400px; background-color: #f7f8f9; margin-top: 20px; padding: 20px;">
        <h3 style="color: black;">
          푼 문제 목록
        </h3>
        <div class="problem-block" th:each="problem:${problems}">
          <a th:href="@{/problem(problemId=${problem.problemId})}">
          <span style="color: white" th:text="${problem.probTitle}">고려22</span>
          </a>
        </div>
      </div>

      <!-- 지금까지 푼 기록(스트릭)-->
      <div style="width:100%; background-color: #f7f8f9; margin-top: 40px; padding: 20px;">
        <h3 style="color: black;">
          스트릭
        </h3>
        <div style="margin-top: 10px">
          <span style="background-color: #dcdfe2;padding: 8px;border-radius: 8px">월별 문제 풀이 개수 통계 정보</span>
        </div>

        <div style="width: 100%;height: 270px; text-align: center;">
            <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
            <canvas id="bar-chart"></canvas>
        </div>
      </div>

      <!-- 히스토리 -->
      <div style="width:100%; background-color: #f7f8f9; margin-top: 40px; padding: 20px;
                position: relative;">
        <div style="display: flex">
          <h3 style="color: black;">
            히스토리
          </h3>
          <!-- 옵션 블럭 -->
          <div style="margin-left: 74%">
            <div class="dropdown">
              <a class="btn btn-secondary dropdown-toggle" href="#" role="button"
                 data-bs-toggle="dropdown" aria-expanded="false">
                세부 능력 선택
              </a>
              <ul class="dropdown-menu" style="width: 100%;">
                <li><a class="dropdown-item" th:href="@{/profile/my-profile}">전체 평균</a></li>
                <li><a class="dropdown-item" th:href="@{/profile/my-profile(gradeNum=1)}">어휘력</a></li>
                <li><a class="dropdown-item" th:href="@{/profile/my-profile(gradeNum=2)}">문장력</a></li>
                <li><a class="dropdown-item" th:href="@{/profile/my-profile(gradeNum=3)}">단락구성력</a></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="margin-top: 10px">
          <span style="background-color: #dcdfe2;padding: 8px;border-radius: 8px">월별 문제 풀이 개수 통계 정보</span>
        </div>
        <!--히스토리 그래프-->
        <div style="width: 100%;height: 270px; text-align: center;">
            <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
            <canvas id="history-chart"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- footer 작성 -->
<div id='wrap' style="background-color: #e9e9e9; margin-top: 20%;">
  <section>
    <!-- 대충 뭐 요소들이 가득차있음 -->
  </section>
  <footer>
    <nav>
      <a href='https://github.com/johan1103' target='_blank'>Github</a>
    </nav>
    <p>
      <span>저자 : 김태형</span><br />
      <span>이메일 : johan1103@naver.com</span><br />
      <span>johan1103 2022. johan1103. All Rights Reserved.</span>
    </p>
  </footer>
</div>
</body>

<script th:inline="javascript">

  $('a.feellink').click(function(e)
  {
    e.preventDefault();
  });
  var jan=[[${strick.get(1)}]];
  var feb=[[${strick.get(2)}]];
  var mar=[[${strick.get(3)}]];
  var apr=[[${strick.get(4)}]];
  var may=[[${strick.get(5)}]];
  var jun=[[${strick.get(6)}]];
  var jul=[[${strick.get(7)}]];
  var aug=[[${strick.get(8)}]];
  var sep=[[${strick.get(9)}]];
  var oct=[[${strick.get(10)}]];
  var nov=[[${strick.get(11)}]];
  var dec=[[${strick.get(12)}]];
  var totalStrick = [[${totalStrick}]];

  var mychart = new Chart(document.getElementById("bar-chart"), {
    type: 'bar',
    data: {
      labels: ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월"],
      datasets: [
        {
          label: "문제 풀이 개수",
          backgroundColor: 'rgba(13, 110, 253, 0.5)',
          //backgroundColor: ["#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850"],
          borderColor: '#0076C0',
          data: [jan, feb, mar, apr, may, jun, jul , aug, sep, oct, nov, dec],
          drawActiveElementsOnTop: true,
          indexAxis: 2,
        }
      ]
    },
    options: {
      responsive: true,
      legend: { display: false },
      title: {
        display: true,
        text: '스트릭'
      },
      scales: {
        yAxes: [{
          ticks: {
            suggestedMin: 0,
            suggestedMax: 30
          }
        }]
      },
      maintainAspectRatio:false
    }
  });

  new Chart(document.getElementById("history-chart"), {
    type: 'line',
    data: {
      labels: ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월"],
      datasets: [
        {
          label: "평균 점수",
          backgroundColor: 'rgba(13, 110, 253, 0.5)',
          //backgroundColor: ["#3e95cd", "#8e5ea2", "#3cba9f", "#e8c3b9", "#c45850"],
          borderColor: '#0076C0',
          data: [totalStrick[1], totalStrick[2], totalStrick[3], totalStrick[4], totalStrick[5],totalStrick[6],
            totalStrick[7], totalStrick[8], totalStrick[9], totalStrick[10], totalStrick[11], totalStrick[12]],
          drawActiveElementsOnTop: true,
          indexAxis: 2,
        }
      ]
    },
    options: {
      responsive: true,
      legend: { display: false },
      title: {
        display: true,
        text: '총점 히스토리'
      },
      scales: {
        yAxes: [{
          ticks: {
            suggestedMin: 0,
            suggestedMax: 7
          }
        }]
      },
      maintainAspectRatio:false
    }
  });
  /*

          scales: {
              yAxes: [{
                  ticks: {
                      suggestedMin: 0,
                      suggestedMax: 7
                  }
              }]
          }
  */
</script>


</html>